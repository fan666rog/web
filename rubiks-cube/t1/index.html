<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>3D 魔術方塊</title>
  <style>
    body { margin: 0; background-color: #000; }
    canvas { display: block; }
  </style>
</head>
<body>
  <!-- 引入 Three.js 和 OrbitControls -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r152/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.152.2/examples/js/controls/OrbitControls.min.js"></script>

  <script>
    // 建立場景
    const scene = new THREE.Scene();

    // 建立相機
    const camera = new THREE.PerspectiveCamera(
      45, window.innerWidth / window.innerHeight, 0.1, 1000
    );
    camera.position.set(6, 6, 6);
    camera.lookAt(0, 0, 0);

    // 建立渲染器
    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    // 控制器
    const controls = new THREE.OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true;
    controls.dampingFactor = 0.05;

    // 環境光與點光源
    const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
    scene.add(ambientLight);

    const pointLight = new THREE.PointLight(0xffffff, 1);
    pointLight.position.set(10, 10, 10);
    scene.add(pointLight);

    // 魔術方塊配色
    const colors = {
      U: 0xffffff, // 上：白
      D: 0xffff00, // 下：黃
      F: 0x00ff00, // 前：綠
      B: 0x0000ff, // 後：藍
      L: 0xff8000, // 左：橘
      R: 0xff0000  // 右：紅
    };

    // 建立立方體方塊（cubelets）
    const cubeSize = 0.95;
    const spacing = 1;
    const cubelets = [];

    for (let x = -1; x <= 1; x++) {
      for (let y = -1; y <= 1; y++) {
        for (let z = -1; z <= 1; z++) {
          const materials = [
            new THREE.MeshBasicMaterial({ color: x === 1 ? colors.R : 0x111111 }), // 右
            new THREE.MeshBasicMaterial({ color: x === -1 ? colors.L : 0x111111 }), // 左
            new THREE.MeshBasicMaterial({ color: y === 1 ? colors.U : 0x111111 }), // 上
            new THREE.MeshBasicMaterial({ color: y === -1 ? colors.D : 0x111111 }), // 下
            new THREE.MeshBasicMaterial({ color: z === 1 ? colors.F : 0x111111 }), // 前
            new THREE.MeshBasicMaterial({ color: z === -1 ? colors.B : 0x111111 })  // 後
          ];

          const cubelet = new THREE.Mesh(
            new THREE.BoxGeometry(cubeSize, cubeSize, cubeSize),
            materials
          );

          cubelet.position.set(x * spacing, y * spacing, z * spacing);
          scene.add(cubelet);
          cubelets.push(cubelet);
        }
      }
    }

    // 重設視窗大小時重新調整
    window.addEventListener('resize', () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });

    // 動畫迴圈
    function animate() {
      requestAnimationFrame(animate);
      controls.update();
      renderer.render(scene, camera);
    }

    animate();
  </script>
</body>
</html>
